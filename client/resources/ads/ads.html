<template name="ads">
  <div class="col s10">
      <h2 class="center-align">Ads Insights and Ads Creative</h2>
    <div class="col s12 center-align">
      <button id="refresh-ads" class="btn-large waves-effect waves-light tooltipped" name="action" data-position="bottom" data-tooltip="Refresh Ads Data" data-id="{{getCampaignNumber}}">
        <h4>REFRESH ADS</h4>
      </button>
    </div>
    <div class="divider" style="margin: 1em 0 1em 0;"></div>
  </div>
  {{#if isReady "AdsList"}}

    <table class="highlight">
      <thead>
        <tr>
          <th>Ad Name</th>
          <th>Runtime</th>
          <th>Title</th>
          <th>Message</th>
          <th>Media</th>
          <th>Ad Link</th>
          <th>Impressions</th>
          <th>Clicks</th>
          <th>Likes</th>
          <th>Video View</th>
          <th>Actions</th>
          <th>CTR</th>
          <th>Spend</th>
        </tr>
      </thead>
      <tbody>
        {{#each ad in getAds}}
          <tr>
            <td>{{ad.data.name}}</td>
            <td>{{ad.data.date_start}} - {{ad.data.date_stop}}</td>
            <td>{{ad.data.title}}</td>
            <td title={{ad.data.message}}>{{shortenMessage ad.data.message}}</td>
            <td><a target="_blank" href="{{ad.data.picture}}">Media</a></td>
            <td><a target="_blank" href="{{ad.data.url}}">Link</a></td>
            <td>{{number ad.data.impressions}}</td>
            <td>{{number ad.data.clicks}}</td>
            <td>{{number ad.data.post_like}}</td>
            <td>{{number ad.data.video_view}}</td>
            <td>{{number ad.data.total_actions}}</td>
            <td>{{shortenCTR ad.data.ctr}}%</td>
            <td>{{money ad.data.spend}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>

    <table class="highlight">
      <thead>
        <tr>
          <th>Media (hover for name)</th>
          <th>Title</th>
          <th>Copy</th>
          <th>Message</th>
          <th>Impressions</th>
          <th>Post Engagement</th>
          <th>Clicks</th>
          <th>Link Clicks</th>
          <th>Likes</th>
          <th>Video View</th>
          <th>Actions</th>
          <th>CTR</th>
          <th>Reach</th>
          <th>Frequency</th>
        </tr>
      </thead>
      <tbody>
        {{#each ad in getAds}}
          <tr>
            <td><img title="{{ad.data.name}}" src="{{ad.data.picture}}" style="height: 125px; width: 125px;"></td>
            <td style="width: 150px;">{{ad.data.title}}</td>
            <td style="width: 150px;">{{ad.data.description}}</td>
            <td style="width: 350px;">{{ad.data.message}}</td>
            <td>{{number ad.data.impressions}}</td>
            <td>{{number ad.data.post_engagement}}</td>
            <td>{{number ad.data.clicks}}</td>
            <td>{{number ad.data.link_click}}</td>
            <td>{{number ad.data.post_like}}</td>
            <td>{{number ad.data.video_view}}</td>
            <td>{{ad.data.total_actions}}</td>
            <td>{{shortenCTR ad.data.ctr}}%</td>
            <td>{{number ad.data.reach}}</td>
            <td>{{shortenCTR ad.data.frequency}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>


    <div class="row">
      {{> highchartsHelper chartId="adCreativeChart" chartWidth="100%" chartHeight="100%" chartObject=adCreativeChart}}
    </div>
    <div class="row">
      {{> highchartsHelper chartId="adPerformanceChart" chartWidth="100%" chartHeight="100%" chartObject=adPerformanceChart}}
    </div>
    <div class="row">
      {{> highchartsHelper chartId="keywordChart" chartWidth="100%" chartHeight="100%" chartObject=keywordChart}}
    </div>
    <div class="row">
      {{> highchartsHelper chartId="keywordClicksChart" chartWidth="100%" chartHeight="100%" chartObject=keywordClicksChart}}
    </div>
    {{!-- {{keywordChart}} --}}

    {{!-- <div class="row"> --}}
      <div class="keyword-wrapper">
        <div class="keywordstats-header"><h3>Keyword Stats</h3></div>
        <table class="highlight">
          <thead>
            <tr>
              <th>Ad Name</th>
              <th>Keyword</th>
              <th>Impressions</th>
              <th>Clicks</th>
            </tr>
          </thead>
          <tbody>
          {{#each stat in getKeywordstats}}
            <tr>
              <td>{{stat.adName}}</td>
              <td>{{stat.word}}</td>
              <td>{{stat.impressions}}</td>
              <td>{{stat.clicks}}</td>
            </tr>
          {{/each}}
          </tbody>
        </table>
      </div>
    {{!-- </div> --}}
  {{else}}
    <p>Loading....</p>
  {{/if}}
</template>
