
<template name="placeholder2">
    <a class="typeahead-text" href="/initiatives/{{_id}}/homepage">{{name}}</a>
</template>


<template name="placeholder">
  {{#if isReady "Initiatives"}}

    <div class="row">
      <div class="col s12">
        <ul class="tabs">
          <li class="tab col s3"><a href="#test1">Test 1</a></li>
          <li class="tab col s3"><a class="active" href="#test2">Test 2</a></li>
          <li class="tab col s3"><a href="#test3">Tab</a></li>
          <li class="tab col s3"><a href="#test4">Test 4</a></li>
        </ul>
      </div>
      <div id="test1" class="col s12">Test 1</div>
      <div id="test2" class="col s12">Test 2</div>
      <div id="test3" class="col s12">Test 3</div>
      <div id="test4" class="col s12">Test 4</div>
    </div>



    {{!-- autocomplete library https://github.com/mizzao/meteor-autocomplete --}}
    {{> inputAutocomplete settings=settings id="initiative-typeahead" class="autocomplete" placeholder="Search For Initiative (Case Sensitive)"}}
    <div class="row">
      <div class="col s12">
        <ul class="tabs">
          <li class="tab col s3"><a href="#active" class="active">Active</a></li>
          <li class="tab col s3"><a href="#endingSoon">Ending Soon</a></li>
          <li class="tab col s3"><a href="#recentlyEnded">Recently Ended</a></li>
          <li class="tab col s3"><a href="#pending">Pending</a></li>
          <li class="tab col s3"><a href="#all">All</a></li>
        </ul>
      </div>
{{!------------------------------ Tabs  ----------------------------------}}
      <div id="active" class="col s12">
        {{> tab}}
      </div>

      <div id="endingSoon" class="col s12">
        {{> endingSoon}}
      </div>

      <div id="recentlyEnded" class="col s12">
        {{> recentlyEnded}}
      </div>

      <div id="pending" class="col s12">
        <h4>Pending</h4>
      </div>

      <div id="all" class="col s12">
        <h4>All</h4>
      </div>
    </div>

  {{else}}
    <p>Loading...</p>
  {{/if}}

  {{#if isInRole 'admin'}}
    <div class="row">
      <div class="col s12">
        <a href="/viewaccounts">
          <button class="btn waves-effect waves-light" name="action">
            View By Accounts
          </button>
        </a>
      </div>
    </div>
  {{/if}}
</template>


<template name="tab">
  <ul class="collection">
    {{#each getActiveInitiatives}}
      <li class="collection-item">
        <div class="row" style="margin-bottom: 5px;">
          <div class="col s6">
            <a href="/initiatives/{{_id}}/homepage"><span class="title" style="font-size: 20px;">{{name}}</span></a>
            <a href="/admin/initiatives/{{_id}}/edit" style="margin-left: 10px;">Edit</a>
          </div>
          {{#if isInRole 'admin'}}
            <div class="switch col s3">
              <label>
                Not Updating
                <input type="checkbox" {{activeUpdates _id}} data-id="{{_id}}">
                <span class="lever"></span>
                Updating
              </label>
            </div>
          {{else}}
            <div class="col s3">
              <p>Placeholder</p>
            </div>
          {{/if}}
          <div class="col s3">
            <p class="right-align">{{formatDate lineItems.[0].startDate}} - {{formatDate lineItems.[0].endDate}}</p>
          </div>
        </div>

        <div class="row" style="margin-bottom: 5px;">
          {{#if isInRole 'admin'}}
            <div class="col s10">
              <p>Owner: {{owner}} | Agency: {{agency}} | Brand: {{brand}}</p>
            </div>
            <div class="col s2">
              <p class="right-align {{isActiveClass}}">{{isActiveInitiative}}</p>
            </div>
            <div class="col s12">
              {{#each item in lineItems}}
                {{#if item.budget}}
                  <span>Objective: {{item.objective}} | Spend: {{calcSpend item.objective _id}}% | Delivery: {{calcDelivery _id @index}}% | Flight: {{calcFlight _id}}% <br> </span>
                {{/if}}
              {{/each}}
            </div>
          {{else}}
            <div class="col s12">
              <p class="right-align {{isActiveClass}}">{{isActiveInitiative}}</p>
            </div>
          {{/if}}
        </div>
      </li>
    {{/each}}
  </ul>
</template>



<template name="endingSoon">
  <h4>Ending Soon Tab</h4>
  <div id="active" class="col s12">
    <ul class="collection">
      {{#each getEndingSoonInitiatives}}
        <li class="collection-item">
          <div class="row" style="margin-bottom: 5px;">
            <div class="col s6">
              <a href="/initiatives/{{_id}}/homepage"><span class="title" style="font-size: 20px;">{{name}}</span></a>
              <a href="/admin/initiatives/{{_id}}/edit" style="margin-left: 10px;">Edit</a>
            </div>
            {{#if isInRole 'admin'}}
              <div class="switch col s3">
                <label>
                  Not Updating
                  <input type="checkbox" {{activeUpdates _id}} data-id="{{_id}}">
                  <span class="lever"></span>
                  Updating
                </label>
              </div>
            {{else}}
              <div class="col s3">
                <p>Placeholder</p>
              </div>
            {{/if}}
            <div class="col s3">
              <p class="right-align">{{formatDate lineItems.[0].startDate}} - {{formatDate lineItems.[0].endDate}}</p>
            </div>
          </div>

          <div class="row" style="margin-bottom: 5px;">
            {{#if isInRole 'admin'}}
              <div class="col s10">
                <p>Owner: {{owner}} | Agency: {{agency}} | Brand: {{brand}}</p>
              </div>
              <div class="col s2">
                <p class="right-align {{isActiveClass}}">{{isActiveInitiative}}</p>
              </div>
              <div class="col s12">
                {{#each item in lineItems}}
                  {{#if item.budget}}
                    <span>Objective: {{item.objective}} | Spend: {{calcSpend item.objective _id}}% | Delivery: {{calcDelivery _id @index}}% | Flight: {{calcFlight _id}}% <br> </span>
                  {{/if}}
                {{/each}}
              </div>
            {{else}}
              <div class="col s12">
                <p class="right-align {{isActiveClass}}">{{isActiveInitiative}}</p>
              </div>
            {{/if}}
          </div>
        </li>
      {{/each}}
    </ul>
  </div>
</template>

<template name="recentlyEnded">
  <h4>Recently Ended</h4>
  <p>Ended Recently</p>
</template>

