

<template name="initiatives">
    <h2>Initiatives</h2>
    {{#each getInitiatives}}
        <a href="/admin/initiatives/{{_id}}"><h4>{{name}}</h4></a>
        <p>Dates: {{startDate}} -- {{endDate}}</p>
        <p>Deal Type: {{dealType}}</p>
        <p>Budget: {{budget}}</p>
    {{/each}}

</template>

<template name="initiative">
    {{#with getInitiative}}
        <a href="/admin/initiatives/{{_id}}/aggregate"><h2>{{name}}</h2></a>
        <p>Brand: {{brand}}</p>
        <p>Agency: {{agency}}</p>
        <p>Deal Type: {{dealType}}</p>
        <p>Budget: {{budget}}</p>
        <p>Quantity: {{quantity}}</p>
        <p>Price: {{price}}</p>
        <p>Starts: {{startDate}}</p>
        <p>Ends: {{endDate}}</p>
        <p>Campaigns: {{campaign_names}}</p>
        <p>notes: {{notes}}</p>
        <button id="edit-initiative-button">Edit</button>
        <button id="delete-initiative">Delete</button>
    {{/with}}
</template>

<template name="initiativeAggregate">
    <h2>Aggregate Stats for Initiative</h2>
    {{#with showAggregate}}
        {{#each showAggregate.aggregateData}}
            <h3>{{_id}}</h3>
            <br><br><br>
            <p>Clicks: {{clicks}}</p>
            <p>CPC: {{cpc}}</p>
            <p>CPM: {{cpm}}</p>
            <p>Reach: {{reach}}</p>
        {{/each}}
    <br><br>
        <p>Agency: {{agency}}</p>
        <p>Budget: {{budget}}</p>
        <p>Deal Type: {{dealType}}</p>
        <p>Price: {{price}}</p>
        <p>Quantity: {{quantity}}</p>
    {{/with}}
</template>



<template name="editInitiativeCampaigns">
  <h2>Edit Initiative Campaigns</h2>
  <div class="row">
    <div id="left" class="col s6">
      <h3>Currently Associated Campaigns</h3>
      {{#each getCampaigns}}
        <div class="teal grabbable" style="border: 1px solid black; height: 2em; font-size: 18px;">
          <p>{{this}}</p>
        </div>
      {{/each}}
    </div>
    <div id="right" class="col s6">
      <h3>All Available Campaigns</h3>
      {{#each getAllCampaigns}}
      <div class="grabbable" style="border: 1px solid black; height: 2em; font-size: 18px;">
        <p>{{this.data.campaign_name}}</p>
      </div>
      {{/each}}
    </div>
  </div>
</template>

<template name="dataPiece">
    <a class="typeahead-text" href="/initiatives/{{_id}}/homepage">{{name}}</a>
</template>

<template name="initiativesHome">
  <div class="container">
    <div class="row">
    <h1 class="align-center" style="margin-top: 6%; margin-bottom: 6%; font-size: 3em;">Your Initiatives</h1>
      {{#if isReady "Initiatives"}}
      {{!-- autocomplete library https://github.com/mizzao/meteor-autocomplete --}}
      {{> inputAutocomplete settings=settings id="initiative-typeahead" class="autocomplete" placeholder="Search For Initiative (Case Sensitive)"}}
        <ul class="collection">
          {{#each getAllInitiatives}}
            <li class="collection-item">
              <div class="row" style="margin-bottom: 5px;">
                <div class="col s5">
                  <a href="/initiatives/{{_id}}/homepage"><span class="title" style="font-size: 20px;">{{name}}</span></a>
                </div>
                <div class="col s1">
                  <a href="/admin/initiatives/{{_id}}/edit" style="margin-left: 10px;">Edit</a>
                </div>
                <div class="col s2">
                  Updating: {{activeUpdates _id}}
                </div>
                <div class="col s4">
                  <p class="right-align">{{formatDate lineItems.[0].startDate}} - {{formatDate lineItems.[0].endDate}}</p>
                </div>
              </div>
              <div class="row" style="margin-bottom: 5px;">
                {{#if isInRole 'admin'}}
                  <div class="col s6">
                    <p>Owner: {{owner}} | Agency: {{agency}} | Brand: {{brand}}</p>
                  </div>
                  <div class="col s4">
                    <p>Spend: {{calcSpend _id}}% | Delivery: {{calcDelivery _id}}% | Flight: {{calcFlight _id}}%</p>
                  </div>
                  <div class="col s2">
                    <p class="right-align {{isActiveClass}}">{{isActiveInitiative}}</p>
                  </div>
                {{else}}
                  <div class="col s12">
                    <p class="right-align {{isActiveClass}}">{{isActiveInitiative}}</p>
                  </div>
                {{/if}}
              </div>
            </li>
          {{/each}}
        </ul>
      {{else}}
        <p>Loading...</p>
      {{/if}}
    </div>
  </div>
  {{#if isInRole 'admin'}}
  <div class="row">
    <div class="col s12">
      <a href="/viewaccounts">
        <button class="btn waves-effect waves-light" name="action">
          View By Accounts
        </button>
      </a>
    </div>
  </div>
  {{/if}}
</template>
