<template name="editInitiative">
  <div class="container">
    <div class="row">
      <div class="col s6">
        <h2>Edit Initiative</h2>
      </div>
    </div>
    <form id="edit-initiative-form" class="col s12">
      {{#with getInitiative}}
        <div class="row">
          <div class="input-field col s6">
            <input type="text" id="initiative-name" name="name" value="{{name}}">
            <label for="initiative-name" class="active">Initiative Name</label>
            <p>Check when creating a new Initiative</p>
            <input type="checkbox" id="active" name="active" checked="{{activeChecked}}">
            <label for="active">Active Initiative</label>
            <div class="input-field col s12">
              <p style="margin-bottom: 0px; margin-top: 10px;">If Initiative will have campaigns with duplicate objectives, check the box and make that campaign the first Line Item</p>
              <input type="checkbox" id="dupObjectives" name="dupObjectives" checked="{{dupObjectivesChecked}}">
              <label for="dupObjectives">Duplicate Objectives</label>
            </div>
          </div>
          <div class="input-field col s6">
            <input type="text" id="search-text" name="search_text" value={{search_text}}>
            <label for="search-text" class="active">Search Text</label>
            <blockquote>
              Search Text is used to identify associated campaigns. <br>
              Ex: if campaign name is "Ruffino 2016 Page Post #50", write "Ruffino 2016 Page Post" <br>
              This <strong>can</strong> be the same name as the initiative.
            </blockquote>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s3">
            <select name="owner" id="owner-select" class="browser-default">
              <option value="{{owner}}" selected>{{owner}}</option>
              <option value="Corey">Corey</option>
              <option value="Kathia">Kathia</option>
              <option value="Veronika">Veronika</option>
              <option value="Phil">Phil</option>
              <option value="Sheri">Sheri</option>
              <option value="Plato">Plato</option>
            </select>
            <label class="active">Owner</label>
          </div>
          <div class="input-field col s3">
            <select name="brand" id="brand-select" class="browser-default">
              <option value="{{brand}}" selected>{{brand}}</option>
              {{#each getBrands}}
                <option value="{{name}}">{{name}}</option>
              {{/each}}
            </select>
            <label class="active">Brand</label>
          </div>
          <div class="input-field col s3">
            <select name="agency" id="agency-select" class="browser-default">
              <option value="{{agency}}" selected>{{agency}}</option>
              <option value="Citizens">Citizens</option>
              <option value="Constellation">Constellation</option>
              <option value="Cornerstone">Cornerstone</option>
              <option value="CUE">CUE</option>
              <option value="Farm Rich">Farm Rich</option>
              <option value="Hadeler Krueger">Hadeler Krueger</option>
              <option value="High Wide & Handsome">High Wide & Handsome</option>
              <option value="Hitachi">Hitachi</option>
              <option value="Horizon">Horizon</option>
              <option value="Icon">Icon</option>
              <option value="Mundy">Mundy</option>
              <option value="Power Creative">Power Creative</option>
              <option value="Rachael Piper">Rachel Piper</option>
              <option value="SapientNitro">SapientNitro</option>
              <option value="True Media">True Media</option>
              <option value="Uniworld">Uniworld</option>
            </select>
            <label class="active">Agency</label>
          </div>
          <div class="input-field col s3">
            <select name="product" id="product-select" class="browser-default">
              <option value="{{product}}" selected>{{product}}</option>
              <option value="Wine">Wine</option>
              <option value="Food">Food</option>
              <option value="Hotels">Hotels</option>
              <option value="Sports">Sports</option>
              <option value="Cars">Cars</option>
              <option value="Travel">Travel</option>
              <option value="Religion">Religion</option>
              <option value="Politics">Politics</option>
              <option value="Clothes">Clothes</option>
              <option value="Technology">Technology</option>
              <option value="Nonprofit">Nonprofit</option>
              <option value="Shoes">Shoes</option>
              <option value="Health">Health</option>
            </select>
            <label class="active">Product</label>
          </div>
        </div>
        <h2>Enter Line Items</h2>
        {{#each getInitiative.lineItems}}
          <ul class="collapsible" data-collapsible="expandable">
            <li>
              <div class="collapsible-header active">
                Line Item {{addOne @index}}
              </div>
              <div class="collapsible-body">
                <div class="row" style="padding-left: 5px; padding-right: 5px;">
                  <div class="input-field col s6">
                    <select name="platform{{addOne @index}}" id="" class="browser-default">
                      <option value="{{platform}}" selected>{{platform}}</option>
                      <option value="Facebook">Facebook</option>
                      <option value="Twitter">Twitter</option>
                      <option value="Google">Google</option>
                      <option value="Pinterest">Pinterest</option>
                      <option value="Instagram">Instagram</option>
                      <option value="Tumblr">Tumblr</option>
                      <option value="Youtube">YouTube</option>
                    </select>
                    <label class="active">Platform</label>
                  </div>
                  <div class="input-field col s6">
                    <select name="objective{{addOne @index}}" id="objective-input" class="browser-default">
                      <option value="{{objective}}">{{objective}}</option>
                      <option value="Conversions">Conversions</option>
                      <option value="Brand Awareness">Brand Awareness</option>
                      <option value="Link Clicks">Clicks to Website</option>
                      <option value="App Engagement">App Engagement</option>
                      <option value="Post Engagement">Post Engagement</option>
                      <option value="App Installs">App Installs</option>
                      <option value="Page Likes">Page Likes</option>
                      <option value="Reach">Reach</option>
                      <option value="Event Attendance">Event Attendance</option>
                      <option value="Offer Claims">Offer Claims</option>
                      <option value="Video Views">Video Views</option>
                      <option value="Leads">Leads</option>
                    </select>
                    <label for="objetive-input" class="active"> Objective</label>
                  </div>
                  <div class="input-field col s4">
                    <select name="dealType{{addOne @index}}" id="dealType-dropdown" class="browser-default">
                    <option value="{{dealType}}">{{dealType}}</option>
                      <option value="CPC">CPC</option>
                      <option value="CPM">CPM</option>
                      <option value="CPL">CPL</option>
                      <option value="CPVV">CPVV</option>
                      <option value="Conversions">Conversions</option>
                      <option value="Clicks to Website">Clicks to Website</option>
                      <option value="App Engagement">App Engagement</option>
                      <option value="Post Engagement">Post Engagement</option>
                      <option value="App Installs">App Installs</option>
                      <option value="Page Likes">Page Likes</option>
                      <option value="Reach">Reach</option>
                      <option value="Event Attendance">Event Attendance</option>
                      <option value="Offer Claims">Offer Claims</option>
                      <option value="Leads">Leads</option>
                      <option value="FACTOR">FACTOR</option>
                    </select>
                    <label class="active">Deal Type</label>
                  </div>
                  <div class="input-field col s3">
                    <input type="text" id="start-date{{addOne @index}}" name="startDate{{addOne @index}}" value={{dateFormatter startDate}}>
                    <label for="start-date{{addOne @index}}" class="active">Start Date</label>
                  </div>
                  <div class="input-field col s3">
                    <input type="text" id="end-date{{addOne @index}}" name="endDate{{addOne @index}}" value={{dateFormatter endDate}}>
                    <label for="end-date{{addOne @index}}" class="active">End Date</label>
                  </div>
                  <div class=" input-field col s3">
                      <input type="checkbox" id="cost_plus{{addOne @index}}" name="costplus{{addOne @index}}" checked="{{costPlusChecked @index}}">
                      <label for="cost_plus{{addOne @index}}">Cost Plus?</label>
                  </div>
                  <div class="input-field col s9">
                    <input type="text" id="cost-plus-percent" name="costPlus{{addOne @index}}" value="{{costPlusPercent}}">
                    <label for="cost-plus-percent{{addOne @index}}" class="active">Cost Plus Percentage</label>
                  </div>
                  <div class=" input-field col s3">
                      <input type="checkbox" id="percent-total{{addOne @index}}" name="percentTotal{{addOne @index}}" checked="{{percentTotalChecked @index}}">
                      <label for="percent-total{{addOne @index}}">Percent of Total?</label>
                  </div>
                  <div class="input-field col s9">
                    <input type="text" id="percent-total-percentage{{addOne @index}}" name="percentTotalPercentage{{addOne @index}}" value="{{percentTotalPercent}}">
                    <label for="percent-total-percentage{{addOne @index}}" class="active">Percent of Total Percentage</label>
                  </div>
                  <div class=" input-field col s3">
                      <input type="checkbox" id="is-client{{addOne @index}}" name="isClient{{addOne @index}}" checked="{{isClientChecked @index}}">
                      <label for="is-client{{addOne @index}}">Is there a client?</label>
                  </div>
                  <div class="input-field col s9">
                    <input type="text" id="client-percentage{{addOne @index}}" name="clientPercentage{{addOne @index}}" value="{{isClientPercent}}">
                    <label for="client-percentage{{addOne @index}}" class="active">Client Percentage</label>
                  </div>
                  <div class="col s4">
                    <blockquote>
                      If no box is checked, this will be a Contracted Spend Deal.
                    </blockquote>
                  </div>

                  <div class="input-field col s2">
                    <input type="text" id="price-input{{addOne @index}}" name="price{{addOne @index}}" value="{{price}}">
                    <label for="price-input{{addOne @index}}" class="active">Per Unit Price</label>
                  </div>
                  <div class="input-field col s2">
                    <input type="text" id="quantity-input{{addOne @index}}" name="quantity{{addOne @index}}" value="{{quantity}}">
                    <label for="quantity-input{{addOne @index}}" class="active">Quantity</label>
                  </div>
                  <div class="input-field col s4">
                    <input type="text" id="budget-input{{addOne @index}}" name="budget{{addOne @index}}" value="{{budget}}">
                    <label for="budget-input{{addOne @index}}" class="active">Budget (no commas, ex: 1000.00)</label>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        {{/each}}
      <h2>Notes</h2>
        <div class="row">
          <div class="input-field col s12">
            <textarea name="notes" class="materialize-textarea" id="textarea1" placeholder="write down any notes for this initiative" value="{{notes}}"></textarea>
            <label for="textarea1"></label>
          </div>
        </div>
        {{#if isReady "campaignBasicsList"}}
          <h2>Campaigns Within This Initiative</h2>
          <div class="row">
            <div class="col s6">
              <ul class="collection">
                {{#each getCampaigns.names}}
                <li class="collection-item">
                  <div>{{this}}
                    <a href="#!" class="secondary-content deleteCampaign">
                      <i class="material-icons" data-name="{{this}}">delete</i>
                    </a>
                  </div>
                </li>
                {{/each}}
              </ul>
            </div>
          </div>
        {{else}}
          <p>Loading...</p>
        {{/if}}

        <a href="/admin/initiatives/{{_id}}/edit/campaigns">Edit Campaigns Associated with this Initiative</a>
        <br /><br />
        <button class="btn waves-effect waves-light" type="submit" name="action">Update Initiative</button>
      {{/with}}
    </form>
  </div>
</template>
