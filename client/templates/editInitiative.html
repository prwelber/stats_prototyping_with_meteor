<template name="editInitiative">
  <nav>
    <div class="nav-wrapper blue-grey darken-2">
      <a href="#" class="brand-logo right">Dashboard</a>
      <ul id="nav-mobile" class="left hide-on-med-and-down">
        <li><a href="/">Home</a></li>
        <li><a href="/admin">Admin</a></li>
      </ul>
    </div>
  </nav>
  <div class="container">
    <div class="row">
      <div class="col s6">
        <h2>Edit Initiative</h2>
      </div>
    </div>
    <form id="edit-initiative-form" class="col s12">
      {{#with getInitiative}}
        <div class="row">
          <div class="input-field col s6">
            <input type="text" id="initiative-name" name="name" value="{{name}}">
            <label for="initiative-name" class="active">Initiative Name</label>
          </div>
          <div class="input-field col s6">
            <input type="text" id="search-text" name="search_text" value={{search_text}}>
            <label for="search-text" class="active">Search Text</label>
            <blockquote>
              Search Text is used to identify associated campaigns. <br>
              Ex: if campaign name is "Ruffino 2016 Page Post #50", write "Ruffino 2016 Page Post" <br>
              This <strong>can</strong> be the same name as the initiative.
            </blockquote>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s4">
            <select name="brand" id="brand-select" class="browser-default">
              <option value="{{brand}}" selected>{{brand}}</option>
              {{#each getBrands}}
                <option value="{{name}}">{{name}}</option>
              {{/each}}
            </select>
            <label class="active">Brand</label>
          </div>
          <div class="input-field col s4">
            <select name="agency" id="agency-select" class="browser-default">
              <option value="{{agency}}" selected>{{agency}}</option>
              <option value="Constellation">Constellation</option>
              <option value="Horizon">Horizon</option>
            </select>
            <label class="active">Agency</label>
          </div>
          <div class="input-field col s4">
            <select name="product" id="product-select" class="browser-default">
              <option value="{{product}}" selected>{{product}}</option>
              <option value="Wine">Wine</option>
              <option value="Food">Food</option>
            </select>
            <label class="active">Product</label>
          </div>
        </div>
        <h2>Enter Line Items</h2>
        {{#each getInitiative.lineItems}}
          <ul class="collapsible" data-collapsible="expandable">
            <li>
              <div class="collapsible-header active">
                Line Item {{addOne @index}}
              </div>
              <div class="collapsible-body">
                <div class="row" style="padding-left: 5px; padding-right: 5px;">
                  <div class="input-field col s6">
                    <select name="platform{{addOne @index}}" id="" class="browser-default">
                      <option value="{{platform}}" selected>{{platform}}</option>
                      <option value="Facebook">Facebook</option>
                      <option value="Twitter">Twitter</option>
                      <option value="Google">Google</option>
                      <option value="Pinterest">Pinterest</option>
                      <option value="Instagram">Instagram</option>
                      <option value="Tumblr">Tumblr</option>
                      <option value="Youtube">YouTube</option>
                    </select>
                    <label class="active">Platform</label>
                  </div>
                  <div class="input-field col s6">
                    <select name="objective{{addOne @index}}" id="objective-input" class="browser-default">
                      <option value="{{objective}}">{{objective}}</option>
                      <option value="Conversions">Conversions</option>
                      <option value="Link Clicks">Link Clicks</option>
                      <option value="App Engagement">App Engagement</option>
                      <option value="Post Engagement">Post Engagement</option>
                      <option value="App Installs">App Installs</option>
                      <option value="Page Likes">Page Likes</option>
                      <option value="Reach">Reach</option>
                      <option value="Event Attendance">Event Attendance</option>
                      <option value="Offer Claims">Offer Claims</option>
                      <option value="Video Views">Video Views</option>
                      <option value="Leads">Leads</option>
                    </select>
                    <label for="objetive-input" class="active"> Objective</label>
                  </div>
                  <div class="input-field col s4">
                    <select name="dealType{{addOne @index}}" id="dealType-dropdown" class="browser-default">
                    <option value="{{dealType}}">{{dealType}}</option>
                      <option value="CPC">CPC</option>
                      <option value="CPM">CPM</option>
                      <option value="CPL">CPL</option>
                      <option value="Conversions">Conversions</option>
                      <option value="Link Clicks">Link Clicks</option>
                      <option value="App Engagement">App Engagement</option>
                      <option value="Post Engagement">Post Engagement</option>
                      <option value="App Installs">App Installs</option>
                      <option value="Page Likes">Page Likes</option>
                      <option value="Reach">Reach</option>
                      <option value="Event Attendance">Event Attendance</option>
                      <option value="Offer Claims">Offer Claims</option>
                      <option value="Video Views">Video Views</option>
                      <option value="Leads">Leads</option>
                      <option value="FACTOR">FACTOR</option>
                    </select>
                    <label class="active">Deal Type</label>
                  </div>
                  <div class="input-field col s3">
                    <input type="text" id="start-date{{addOne @index}}" name="startDate{{addOne @index}}" value={{dateFormatter startDate}}>
                    <label for="start-date{{addOne @index}}" class="active">Start Date</label>
                  </div>
                  <div class="input-field col s3">
                    <input type="text" id="end-date{{addOne @index}}" name="endDate{{addOne @index}}" value={{dateFormatter endDate}}>
                    <label for="end-date{{addOne @index}}" class="active">End Date</label>
                  </div>
                  <div class=" input-field col s3">
                      <input type="checkbox" id="cost_plus{{addOne @index}}" name="costplus{{addOne @index}}" checked="{{costPlusChecked @index}}">
                      <label for="cost_plus{{addOne @index}}">Cost Plus?</label>
                  </div>
                  <div class="input-field col s9">
                    <input type="text" id="cost-plus-percent" name="costPlus{{addOne @index}}" value="{{costPlusPercent}}">
                    <label for="cost-plus-percent{{addOne @index}}" class="active">Cost Plus Percentage</label>
                  </div>
                  <div class=" input-field col s3">
                      <input type="checkbox" id="percent-total{{addOne @index}}" name="percentTotal{{addOne @index}}" checked="{{percentTotalChecked @index}}">
                      <label for="percent-total{{addOne @index}}">Percent of Total?</label>
                  </div>
                  <div class="input-field col s9">
                    <input type="text" id="percent-total-percentage{{addOne @index}}" name="percentTotalPercentage{{addOne @index}}" value="{{percentTotalPercent}}">
                    <label for="percent-total-percentage{{addOne @index}}" class="active">Percent of Total Percentage</label>
                  </div>
                  <div class=" input-field col s3">
                      <input type="checkbox" id="is-client{{addOne @index}}" name="isClient{{addOne @index}}" checked="{{isClientChecked @index}}">
                      <label for="is-client{{addOne @index}}">Is there a client?</label>
                  </div>
                  <div class="input-field col s9">
                    <input type="text" id="client-percentage{{addOne @index}}" name="clientPercentage{{addOne @index}}" value="{{isClientPercent}}">
                    <label for="client-percentage{{addOne @index}}" class="active">Client Percentage</label>
                  </div>
                  <div class="col s4">
                    <blockquote>
                      If no box is checked, this will be a Contracted Spend Deal.
                    </blockquote>
                  </div>

                  <div class="input-field col s2">
                    <input type="text" id="price-input{{addOne @index}}" name="price{{addOne @index}}" value="{{price}}">
                    <label for="price-input{{addOne @index}}" class="active">Per Unit Price</label>
                  </div>
                  <div class="input-field col s2">
                    <input type="text" id="quantity-input{{addOne @index}}" name="quantity{{addOne @index}}" value="{{quantity}}">
                    <label for="quantity-input{{addOne @index}}" class="active">Quantity</label>
                  </div>
                  <div class="input-field col s4">
                    <input type="text" id="budget-input{{addOne @index}}" name="budget{{addOne @index}}" value="{{budget}}">
                    <label for="budget-input{{addOne @index}}" class="active">Budget (no commas, ex: 1000.00)</label>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        {{/each}}
      <h2>Notes</h2>
        <div class="row">
          <div class="input-field col s12">
            <textarea name="notes" class="materialize-textarea" id="textarea1" placeholder="write down any notes for this initiative" value="{{notes}}"></textarea>
            <label for="textarea1"></label>
          </div>
        </div>
        <h2>Campaigns Within This Initiative</h2>
        <div class="row">
          <div class="col s4">
            <div class="collection">
              {{#each getCampaigns.names}}
                <li class="collection-item">{{this}}</li>
              {{/each}}
            </div>
          </div>
        </div>
        <a href="/admin/initiatives/{{_id}}/edit/campaigns">Edit Campaigns Associated with this Initiative</a>
        <br /><br />
        <button class="btn waves-effect waves-light" type="submit" name="action">Update Initiative</button>
      {{/with}}
    </form>
  </div>
</template>
